ก่อนจะ train โมเดล time-series เราต้องแน่ใจว่า index เป็น datetime 
และข้อมูลเรียงตามลำดับเวลา การมี missing / duplicates / ไม่มีความถี่ (freq) 
จะทำให้ผลพยากรณ์ผิดพลาด และการประเมินโมเดล (train/test) 
ไม่มีความหมาย เพราะลำดับเวลาเสียไป เราจึงต้องทำ cleaning และ 
(ถ้าจำเป็น) สร้าง fake datetime index อย่างระมัดระวัง

____________________________________________________________________________________________________________________________

กล่าวคร่าว ๆ ถึงแต่ละขั้นตอน:
ตรวจ columns, types: รู้ว่า t คืออะไร (ลำดับเวลา), ProductP4 เป็น numeric หรือไม่

แปลงเป็น datetime ถ้ามี column วันจริง

ถ้าไม่มี วันจริง ให้สร้างจาก t สมมติ start date และ frequency ที่สอดคล้องกับข้อมูล (เช่น daily → freq='D', weekly → freq='W')

เติม missing หรือทำ interpolation ถ้าขาดไม่มาก แต่หาก missing เป็นช่วงยาว ให้พิจารณาลบหรือใช้ model-based imputation

ลงท้ายด้วยการบันทึกไฟล์ cleaned เพื่อให้ dashboard / model load ได้สะดวก

____________________________________________________________________________________________________________________________

คำอธิบายทีละบรรทัดของโค้ด
โหลดไฟล์ CSV → พิมพ์ column และจำนวนแถวเพื่อตรวจความถูกต้อง

ตรวจว่ามี date หรือ t ถ้ามี date แปลงเป็น pd.to_datetime และตั้งเป็น index

ถ้าไม่มี date แต่มี t (ลำดับเวลา) → สร้าง date โดยสมมติ start_date + offset ตาม t

เลือกคอลัมน์ target (ProductP4) แล้วแปลงเป็น numeric (ผิดพลาดเป็น NaN)

ถ้ามี missing น้อยกว่า 20% → เติมด้วย interpolate(method='time') แล้ว forward/back fill

ถ้ามี duplicate datetime → รวมค่า (mean)

ตรวจ freq ถ้าไม่สม่ำเสมอ → สร้าง full index ด้วย pd.date_range แล้ว reindex + fill gaps

ตรวจค่าลบ (ถ้าเป็นยอดขาย ควรเป็น >=0)

บันทึกไฟล์ cleaned เป็น time_series_cleaned.csv และสร้าง dataset.json สำหรับ dashboard

____________________________________________________________________________________________________________________________

ข้อควรระวัง / Tips
อย่าเติม missing แบบสุ่ม — อาจ bias ผลลัพธ์

อย่าสร้าง fake dates ถ้า t ไม่ได้เป็นลำดับสม่ำเสมอจริง ๆ (เช่น ข้อมูลถูกเก็บตามเหตุการณ์ ไม่ใช่ daily)

ถ้ามี seasonality ที่เปลี่ยนแปลง (non-stationary seasonality) → ระวังการเติมค่าอัตโนมัติ

เก็บไฟล์ cleaned ไว้เป็นสำเนา (raw tetapเก็บไว้) เพื่อให้ย้อนกลับได้

บันทึก start_date และ freq ที่ใช้ในสไลด์ (โปร่งใสต่อการ reproduce)